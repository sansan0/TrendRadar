<div align="center" id="trendradar">

<a href="https://github.com/sansan0/TrendRadar" title="TrendRadar">
  <img src="/_image/banner.webp" alt="TrendRadar Banner" width="80%">
</a>

🚀 **30秒**でデプロイ — あなたのスマートトレンドニュースアシスタント

<a href="https://trendshift.io/repositories/14726" target="_blank"><img src="https://trendshift.io/api/badge/repositories/14726" alt="sansan0%2FTrendRadar | Trendshift" style="width: 250px; height: 55px;" width="250" height="55"/></a>

<a href="https://share.302.ai/mEOUzG" target="_blank" title="オールインワンAIモデルおよびAPIプラットフォーム"><img src="_image/302ai.png" alt="302.AI logo" height="50"/></a>
<a href="https://shandianshuo.cn" target="_blank" title="AI音声入力、タイピングより4倍速 ⚡"><img src="_image/shandianshuo.png" alt="闪电说 logo" height="51"/></a>

[![GitHub Stars](https://img.shields.io/github/stars/sansan0/TrendRadar?style=flat-square&logo=github&color=yellow)](https://github.com/sansan0/TrendRadar/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/sansan0/TrendRadar?style=flat-square&logo=github&color=blue)](https://github.com/sansan0/TrendRadar/network/members)
[![License](https://img.shields.io/badge/license-GPL--3.0-blue.svg?style=flat-square)](LICENSE)
[![Version](https://img.shields.io/badge/version-v3.4.0-blue.svg)](https://github.com/sansan0/TrendRadar)
[![MCP](https://img.shields.io/badge/MCP-v1.0.3-green.svg)](https://github.com/sansan0/TrendRadar)

[![WeWork](https://img.shields.io/badge/WeWork-Notification-00D4AA?style=flat-square)](https://work.weixin.qq.com/)
[![WeChat](https://img.shields.io/badge/WeChat-Notification-00D4AA?style=flat-square)](https://weixin.qq.com/)
[![Telegram](https://img.shields.io/badge/Telegram-Notification-00D4AA?style=flat-square)](https://telegram.org/)
[![DingTalk](https://img.shields.io/badge/DingTalk-Notification-00D4AA?style=flat-square)](#)
[![Feishu](https://img.shields.io/badge/Feishu-Notification-00D4AA?style=flat-square)](https://www.feishu.cn/)
[![Email](https://img.shields.io/badge/Email-Notification-00D4AA?style=flat-square)](#)
[![ntfy](https://img.shields.io/badge/ntfy-Notification-00D4AA?style=flat-square)](https://github.com/binwiederhier/ntfy)
[![Bark](https://img.shields.io/badge/Bark-Notification-00D4AA?style=flat-square)](https://github.com/Finb/Bark)
[![Slack](https://img.shields.io/badge/Slack-Notification-00D4AA?style=flat-square)](https://slack.com/)


[![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-Automation-2088FF?style=flat-square&logo=github-actions&logoColor=white)](https://github.com/sansan0/TrendRadar)
[![GitHub Pages](https://img.shields.io/badge/GitHub_Pages-Deployment-4285F4?style=flat-square&logo=github&logoColor=white)](https://sansan0.github.io/TrendRadar)
[![Docker](https://img.shields.io/badge/Docker-Deployment-2496ED?style=flat-square&logo=docker&logoColor=white)](https://hub.docker.com/r/wantcat/trendradar)
[![MCP Support](https://img.shields.io/badge/MCP-AI_Analysis-FF6B6B?style=flat-square&logo=ai&logoColor=white)](https://modelcontextprotocol.io/)

</div>

<div align="center">

**[中文](README.md)** | **[English](README-EN.md)** | **日本語**

</div>


> このプロジェクトは軽量で簡単にデプロイできるよう設計されています

## 📑 クイックナビゲーション

<div align="center">

| [🎯 主要機能](#-主要機能) | [🚀 クイックスタート](#-クイックスタート) | [🐳 Dockerデプロイ](#-dockerデプロイ) | [🤖 AI分析](#-ai分析デプロイ) |
|:---:|:---:|:---:|:---:|
| [📝 更新履歴](#-更新履歴) | [🔌 MCPクライアント](#-mcpクライアント) | [❓ FAQ & サポート](#-faq--サポート) | [⭐ 関連プロジェクト](#-関連プロジェクト) |
| [🔧 カスタムプラットフォーム](#カスタム監視プラットフォーム) | [📝 キーワード設定](#frequencywordstxt-設定) | | |

</div>

- **バグ報告者**の皆様に感謝します。皆様のフィードバックがこのプロジェクトをより良くしています 😉
- **スター**してくださった皆様に感謝します。皆様のスターとフォークがオープンソースへの最高のサポートです 😍
- **フォロワー**の皆様に感謝します。皆様のインタラクションがコンテンツをより意義深くしています 😎

<details>
<summary>👉 クリックして<strong>謝辞</strong>を表示 (現在<strong>🔥73🔥</strong>名のサポーター)</summary>

### データサポート

このプロジェクトは[newsnow](https://github.com/ourongxing/newsnow)のAPIを使用してマルチプラットフォームデータを取得しています

### プロモーションサポート

> 以下のプラットフォームおよび個人の推薦に感謝します（時系列順）

- [Appinn (小众软件)](https://mp.weixin.qq.com/s/fvutkJ_NPUelSW9OGK39aA) - オープンソースソフトウェア推薦プラットフォーム
- [LinuxDo Community](https://linux.do/) - 技術愛好家コミュニティ
- [Ruan Yifeng's Weekly](https://github.com/ruanyf/weekly) - 中国の技術界で影響力のある技術週刊誌

### コミュニティサポート

> **資金提供者**の皆様に感謝します。皆様の寛大さは、私のキーボードの横のスナックと飲み物に変わり、このプロジェクトのあらゆる反復に付き添っています

| サポーター | 金額 (CNY) | 日付 | 備考 |
| :-------: | :----------: | :--: | :--: |
| D*5 | 1.8 * 3 | 2025.11.24 | |
| *鬼 | 1 | 2025.11.17 | |
| *超 | 10 | 2025.11.17 | |
| R*w | 10 | 2025.11.17 | Great agent work! |
| J*o | 1 | 2025.11.17 | Thanks for open source |
| *晨 | 8.88 | 2025.11.16 | Nice project |
| *海 | 1 | 2025.11.15 | |
| *德 | 1.99 | 2025.11.15 | |
| *疏 | 8.8 | 2025.11.14 | Great project |
| M*e | 10 | 2025.11.14 | Open source is not easy |
| **柯 | 1 | 2025.11.14 | |
| *云 | 88 | 2025.11.13 | Good project |
| *W | 6 | 2025.11.13 | |
| *凯 | 1 | 2025.11.13 | |
| 对*. | 1 | 2025.11.13 | Thanks for TrendRadar |
| s*y | 1 | 2025.11.13 | |
| **翔 | 10 | 2025.11.13 | Wish I found it earlier |
| *韦 | 9.9 | 2025.11.13 | TrendRadar is awesome |
| h*p | 5 | 2025.11.12 | Support Chinese open source |
| c*r | 6 | 2025.11.12 | |
| a*n | 5 | 2025.11.12 | |
| 。*c | 1 | 2025.11.12 | Thanks for sharing |
| ... | ... | ... | **（その他50名以上のサポーター）** |

</details>


> このプロジェクトは[newsnow](https://github.com/ourongxing/newsnow)のAPIを使用してマルチプラットフォームデータを取得しています

## ✨ 主要機能

### **マルチプラットフォームトレンドニュース集約**

- 知乎（Zhihu）
- 抖音（Douyin）
- Bilibili ホット検索
- 華尔街見聞（Wallstreetcn）
- 贴吧（Tieba）
- 百度（Baidu）ホット検索
- 财联社（Yicai）
- 澎湃新聞（Thepaper）
- 凤凰网（Ifeng）
- 今日头条（Toutiao）
- 微博（Weibo）

11の主要プラットフォームをデフォルトで監視し、カスタムプラットフォームの追加をサポートしています。

<details id="カスタム監視プラットフォーム">
<summary><strong>👉 クリックして展開: カスタム監視プラットフォーム</strong></summary>
<br>

ニュースデータは[newsnow](https://github.com/ourongxing/newsnow)から提供されています。[ウェブサイト](https://newsnow.busiyi.world/)にアクセスして[More]をクリックすると、希望するプラットフォームが利用可能かどうかを確認できます。

プラットフォームを追加するには、[ソースコード](https://github.com/ourongxing/newsnow/tree/main/server/sources)にアクセスし、`config/config.yaml`の`platforms`設定を変更してください：

```yaml
platforms:
  - id: "toutiao"
    name: "Toutiao"
  - id: "baidu"
    name: "Baidu Hot"
  - id: "wallstreetcn-hot"
    name: "Wallstreetcn"
  # さらにプラットフォームを追加...
```

不明な場合は、[コミュニティ共有設定](https://github.com/sansan0/TrendRadar/issues/95)からコピーできます。

</details>

### **スマートプッシュ戦略**

**3つのプッシュモード**:

| モード | 対象ユーザー | プッシュタイミング | 表示内容 | 使用例 |
|------|--------------|-------------|-----------------|----------|
| **日次サマリー**<br/>`daily` | 📋 マネージャー/一般ユーザー | スケジュールプッシュ（デフォルト：毎時） | 当日のすべてのマッチニュース<br/>+ 新規ニュースセクション | 日次レポート<br/>包括的なトレンド概要 |
| **現在のランキング**<br/>`current` | 📰 コンテンツクリエイター | スケジュールプッシュ（デフォルト：毎時） | 現在のランキングマッチ<br/>+ 新規ニュースセクション | リアルタイムホットトピック<br/>今トレンドのもの |
| **増分モニター**<br/>`incremental` | 📈 トレーダー/投資家 | 新規のみプッシュ | 新たに表示されたマッチニュース | 重複情報を回避<br/>高頻度監視 |

**追加機能 - プッシュ時間ウィンドウ制御**（オプション）:

この機能はあらゆるプッシュモードと独立して動作します：

- **時間ウィンドウ制限**: プッシュ時間範囲を設定（例：09:00-18:00 または 20:00-22:00）
- **プッシュ頻度制御**:
  - ウィンドウ内複数プッシュ: 実行ごとにプッシュ
  - 1日1回: ウィンドウ内で1回のみプッシュ（daily/currentモードに適している）
- **典型的なシナリオ**:
  - 勤務時間プッシュ: 平日09:00-18:00のみメッセージを受信
  - 夕方サマリー: 固定の夕方時間にサマリーを受信（例：20:00-22:00）
  - おやすみモード: 非勤務時間の通知を防ぐ

> ヒント: この機能はデフォルトで無効になっています。`config/config.yaml`の`push_window.enabled`で手動で有効にしてください

### **正確なコンテンツフィルタリング**

個人キーワード（例：AI、BYD、教育政策）を設定して、関連するトレンドニュースのみを受信し、ノイズをフィルタリングします。

- 通常単語、必須単語（+）、フィルター単語（!）、数量限制（@）をサポート
- グループベースの管理で、異なるトピックごとに独立した統計

> フィルタリングをスキップしてすべてのトレンドニュースを受信することもできます。[更新履歴](#-更新履歴)のv2.0.1を参照してください

<details id="frequencywordstxt-設定">
<summary><strong>👉 クリックして展開: frequency_words.txt 設定</strong></summary>
<br>

`frequency_words.txt`で監視キーワードを設定します。3つの構文タイプとグループ化機能があります。

上部にあるキーワードの優先度が高くなります。興味に基づいてキーワードの順序を調整してください。

| 構文タイプ | シンボル | 目的 | 例 | マッチングロジック |
|------------|--------|---------|---------|----------------|
| **通常** | なし | 基本マッチング | `Huawei` | いずれか1つにマッチ |
| **必須** | `+` | スコープ制限 | `+phone` | 両方を含む必要がある |
| **フィルター** | `!` | ノイズ除外 | `!ad` | 含まれている場合は除外 |
| **数量限制** | `@` | 表示数量制御 | `@10` | 最大10件表示（v3.2.0 新機能） |

### 📋 基本構文

#### 1. **通常キーワード** - 基本マッチング
```txt
Huawei
OPPO
Apple
```
**効果:** これらの単語の**いずれか1つ**を含むニュースがキャプチャされます

#### 2. **必須単語** `+word` - スコープ制限
```txt
Huawei
OPPO
+phone
```
**効果:** 通常単語**と**必須単語の両方を含む必要があります

#### 3. **フィルター単語** `!word` - ノイズ除外
```txt
Apple
Huawei
!fruit
!price
```
**効果:** フィルター単語を含むニュースは**除外**されます（キーワードを含んでいても）

### 🔗 グループ機能 - 空行の重要性

**コアルール:** **空行**を使用して異なるグループを分離し、各グループは独立してカウントされます

#### 設定例:
```txt
iPhone
Huawei
OPPO
+launch

A-shares
Shanghai Index
Shenzhen Index
+fluctuation
!prediction

World Cup
Euro Cup
Asian Cup
+match
```

#### グループ説明とマッチング効果:

**グループ1 - スマホ発売:**
- キーワード: iPhone, Huawei, OPPO
- 必須: launch
- 効果: スマホブランド名と「launch」の両方を含む必要があります

**マッチング例:**
- ✅ "iPhone 15 officially launched with pricing" ← 「iPhone」+「launch」を含む
- ✅ "Huawei Mate60 series launch livestream" ← 「Huawei」+「launch」を含む
- ✅ "OPPO Find X7 launch date confirmed" ← 「OPPO」+「launch」を含む
- ❌ "iPhone sales hit record high" ← 「iPhone」を含むが「launch」が欠落

**グループ2 - 株式市場:**
- キーワード: A-shares, Shanghai Index, Shenzhen Index
- 必須: fluctuation
- フィルター: prediction
- 効果: 株式関連の単語と「fluctuation」を含むが、「prediction」は除外

**マッチング例:**
- ✅ "A-shares major fluctuation analysis today" ← 「A-shares」+「fluctuation」を含む
- ✅ "Shanghai Index fluctuation reasons explained" ← 「Shanghai Index」+「fluctuation」を含む
- ❌ "Experts predict A-shares fluctuation trends" ← 「A-shares」+「fluctuation」を含むが「prediction」も含む
- ❌ "A-shares trading volume hits new high" ← 「A-shares」を含むが「fluctuation」が欠落

**グループ3 - サッカーイベント:**
- キーワード: World Cup, Euro Cup, Asian Cup
- 必須: match
- 効果: カップ名と「match」の両方を含む必要があります

**マッチング例:**
- ✅ "World Cup group stage match results" ← 「World Cup」+「match」を含む
- ✅ "Euro Cup final match time" ← 「Euro Cup」+「match」を含む
- ❌ "World Cup tickets on sale" ← 「World Cup」を含むが「match」が欠落

### 🎯 設定のヒント

#### 1. **広範から厳格な戦略**
```txt
# ステップ1: テスト用の広範なキーワードから始める
Artificial Intelligence
AI
ChatGPT

# ステップ2: ミスマッチが見つかったら、必須単語を追加
Artificial Intelligence
AI
ChatGPT
+technology

# ステップ3: ノイズが見つかったら、フィルター単語を追加
Artificial Intelligence
AI
ChatGPT
+technology
!advertisement
!training
```

#### 2. **過度の複雑さを避ける**
❌ **非推奨:** 1つのグループに単語が多すぎる
```txt
Huawei
OPPO
Apple
Samsung
vivo
OnePlus
Meizu
+phone
+launch
+sales
!fake
!repair
!second-hand
```

✅ **推奨:** 正確なグループに分割
```txt
Huawei
OPPO
+new product

Apple
Samsung
+launch

phone
sales
+market
```

</details>

<a name="キーワード高度設定"></a>

<details>
<summary><strong>👉 クリックして展開: 高度な設定チュートリアル（v3.2.0 新機能）</strong></summary>
<br>

##### キーワードソート優先度

**設定場所:** `config/config.yaml`

```yaml
report:
  sort_by_position_first: false  # ソート優先度設定
```

| 設定値 | ソートルール | 適用シナリオ |
|--------|-------------|-------------|
| `false`（デフォルト） | トレンド記事数 ↓ → 設定位置 ↑ | 人気度トレンドに注目 |
| `true` | 設定位置 ↑ → トレンド記事数 ↓ | 個人の優先度に注目 |

**例:** 設定順序 A、B、C、トレンド記事数 A(3件)、B(10件)、C(5件)
- `false`: B(10件) → C(5件) → A(3件)
- `true`: A(3件) → B(10件) → C(5件)

##### グローバル表示数量制限

```yaml
report:
  max_news_per_keyword: 10  # 各キーワードの最大表示数10件（0=制限なし）
```

**Docker環境変数:**
```bash
SORT_BY_POSITION_FIRST=true
MAX_NEWS_PER_KEYWORD=10
```

**総合例:**
```yaml
# config.yaml
report:
  sort_by_position_first: true   # 設定順序優先
  max_news_per_keyword: 10       # グローバルデフォルト各キーワード最大10件
```

```txt
# frequency_words.txt
Tesla
Musk
@20              # 重点フォーカス、20件表示（グローバル設定を上書き）

Huawei            # グローバル設定を使用、10件表示

BYD
@5               # 5件に制限
```

**最終結果:** 設定順序に従って表示 Tesla(20件) → Huawei(10件) → BYD(5件)

</details>


### **トレンド分析**

ニュースの人気度変化をリアルタイムで追跡し、「何がトレンドか」だけでなく「トレンドがどう進化するか」を理解できます。

- **タイムライントラッキング**: 最初から最後の出現までの完全な時間スパンを記録
- **人気度の変化**: ランキングの変化と時間帯ごとの出現頻度を追跡
- **新規検出**: 新興トピックをリアルタイムで識別し、🆕でマーク
- **継続性分析**: 一過性のホットトピックと継続的に発展するニュースを区別
- **クロスプラットフォーム比較**: 異なるプラットフォーム間で同じニュースを表示し、メディアの注目度の違いを示す

> 重要なニュースの完全な発展を見逃すことはありません。トピックの出現から議論のピークまで

<details>
<summary><strong>👉 クリックして展開: プッシュ形式の説明</strong></summary>
<br>

📊 トレンドキーワード統計

🔥 [1/3] AI ChatGPT : 2 項目

  1. [Baidu Hot] 🆕 ChatGPT-5 officially launched [**1**] - 09:15 (1 回)

  2. [Toutiao] AI chip concept stocks surge [**3**] - [08:30 ~ 10:45] (3 回)

━━━━━━━━━━━━━━━━━━━

📈 [2/3] BYD Tesla : 2 項目

  1. [Weibo] 🆕 BYD monthly sales break record [**2**] - 10:20 (1 回)

  2. [Douyin] Tesla price reduction promotion [**4**] - [07:45 ~ 09:15] (2 回)

━━━━━━━━━━━━━━━━━━━

📌 [3/3] A-shares Stock Market : 1 項目

  1. [Wallstreetcn] A-shares midday review [**5**] - [11:30 ~ 12:00] (2 回)

🆕 新規トレンドニュース（合計 2 項目）

**Baidu Hot** (1 項目):
  1. ChatGPT-5 officially launched [**1**]

**Weibo** (1 項目):
  1. BYD monthly sales break record [**2**]

更新: 2025-01-15 12:30:15


## **メッセージ形式の説明**

| 形式要素 | 例 | 意味 | 説明 |
| ------------- | ------- | -------- | ----------- |
| 🔥📈📌 | 🔥 [1/3] AI ChatGPT | 人気度レベル | 🔥 高（≥10） 📈 中（5-9） 📌 通常（<5） |
| [番号/合計] | [1/3] | ランク位置 | すべてのマッチの中の現在のグループランク |
| キーワードグループ | AI ChatGPT | キーワードグループ | 設定からのグループ、タイトルに単語を含む必要がある |
| : N 項目 | : 2 項目 | マッチカウント | このグループにマッチするニュースの合計 |
| [プラットフォーム] | [Baidu Hot] | ソースプラットフォーム | ニュースのプラットフォーム名 |
| 🆕 | 🆕 ChatGPT-5 officially launched | 新規マーク | このラウンドでの初出現 |
| [**番号**] | [**1**] | 高ランク | ランク ≤ 閾値、太字赤表示 |
| [番号] | [7] | 通常ランク | ランク > 閾値、通常表示 |
| - 時刻 | - 09:15 | 初回時刻 | ニュースが最初に発見された時刻 |
| [時刻~時刻] | [08:30 ~ 10:45] | 期間 | 最初から最後の出現までの時間範囲 |
| (N 回) | (3 回) | 頻度 | 監視中の合計出現回数 |
| **新規セクション** | 🆕 **新規トレンドニュース** | 新規トピックサマリー | 新たに出現したトピックを別途表示 |

</details>


### **パーソナライズされたトレンドアルゴリズム**

プラットフォームアルゴリズムに制御されることなく、TrendRadarがすべてのトレンド検索を再編成します：

- **高ランクニュースを優先**（60%）: 各プラットフォームのトップランクニュースが最初に表示
- **持続的なトピックに注目**（30%）: 繰り返し出現するニュースがより重要
- **ランキング品質を考慮**（10%）: 頻繁なだけでなく、一貫してトップランク

> 各プラットフォームのトレンド検索を統合し、あなたの興味に基づいて再ソートします。これら3つの比率はシナリオに応じて調整できます。

<details>
<summary><strong>👉 クリックして展開: トレンド重み調整</strong></summary>
<br>

現在のデフォルト設定はバランスが取れています。

### 2つのコアシナリオ

**リアルタイムトレンドタイプ**:
```yaml
weight:
  rank_weight: 0.8    # 主にランキングに注目
  frequency_weight: 0.1  # 継続性への関心は少ない
  hotness_weight: 0.1
```
**対象ユーザー**: コンテンツクリエイター、マーケター、現在のホットトピックを迅速に理解したいユーザー

**深堀りトピックタイプ**:
```yaml
weight:
  rank_weight: 0.4    # 適度なランキング注目
  frequency_weight: 0.5  # 当日の持続的な熱量を強調
  hotness_weight: 0.1
```
**対象ユーザー**: 投資家、研究者、ジャーナリスト、深いトレンド分析が必要なユーザー

### 調整方法
1. **3つの数値の合計は1.0である必要があります**
2. **重要なものを増やす**: ランキング重視ならrank_weight、継続性重視ならfrequency_weightを増やす
3. **一度に0.1-0.2の調整を推奨**、効果を観察

コアアイデア: スピードと適時性を追求するユーザーはランキング重みを増やし、深さと安定性を追求するユーザーは頻度重みを増やします。

</details>

### **マルチチャネルリアルタイムプッシュ**

**WeWork**（+ WeChat プッシュソリューション）、**Feishu**、**DingTalk**、**Telegram**、**Email**、**ntfy**をサポート — メッセージがスマホとメールに直接配信されます。

### **マルチプラットフォームサポート**
- **GitHub Pages**: 美しいWebレポートを自動生成、PC/モバイル対応
- **Dockerデプロイ**: マルチアーキテクチャのコンテナ化運用をサポート
- **データ永続化**: HTML/TXT マルチフォーマット履歴保存


### **AIスマート分析（v3.0.0 新機能）**

MCP（Model Context Protocol）ベースのAI会話分析システムで、自然言語による深いデータマイニングを可能にします。

- **会話クエリ**: 自然言語で質問、例：「昨日のZhihuトレンドをクエリ」または「最近のビットコイン人気トレンドを分析」
- **13の分析ツール**: 基本クエリ、スマート検索、トレンド分析、データインサイト、感情分析など
- **マルチクライアントサポート**: Cherry Studio（GUI設定）、Claude Desktop、Cursor、Clineなど
- **深い分析機能**:
  - トピックトレンド追跡（人気度の変化、ライフサイクル、バイラル検出、トレンド予測）
  - クロスプラットフォームデータ比較（アクティビティ統計、キーワード共起）
  - スマートサマリー生成、類似ニュース検索、履歴相関検索

> もはや手動でデータファイルを閲覧する必要はありません — AIアシスタントがニュースの背後にあるストーリーを数秒で理解します

### **技術障壁ゼロのデプロイ**

ワンクリックGitHub Forkで使用可能、プログラミング不要。

> 30秒デプロイ: GitHub Pages（Web閲覧）はワンクリックで画像として保存し簡単に共有できます
>
> 1分デプロイ: WeWork（モバイル通知）

**💡 ヒント:** **リアルタイム更新**されるWeb版が欲しいですか？フォーク後、リポジトリのSettings → Pagesに移動してGitHub Pagesを有効にしてください。[プレビュー効果](https://sansan0.github.io/TrendRadar/)。

### **アプリ依存を削減**

「アルゴリズム推薦の虜」から「欲しい情報を能動的に得る」への変革

**対象ユーザー:** 投資家、コンテンツクリエイター、PR専門家、ニュースを意識する一般ユーザー

**典型的なシナリオ:** 株式投資監視、ブランド感情追跡、業界トレンドウォッチ、ライフスタイルニュース収集


| Github Pages 効果（モバイル対応、Emailプッシュ） | Feishu プッシュ効果 |
|:---:|:---:|
| ![Github Pages Effect](_image/github-pages.png) | ![Feishu Push Effect](_image/feishu.jpg) |


## 📝 更新履歴

>**アップグレード手順**:
- **ヒント**: このプロジェクトを**Sync fork**経由で更新しないでください。[更新履歴](#更新履歴)を確認して特定の[アップグレード方法]と[機能]を理解してください
- **マイナーバージョン更新**: v2.xからv2.yへのアップグレード、フォークしたリポジトリの`main.py`を最新版に置き換え
- **メジャーバージョンアップグレード**: v1.xからv2.yへのアップグレード、既存のフォークを削除して再フォークすることを推奨（手間を省き、設定の競合を回避）


### 2025/11/26 - mcp-v1.0.3

  **MCPモジュール更新:**
  - 日付解析ツール resolve_date_range を新規追加、AIモデルの日付計算不整合問題を解決
  - 自然言語日付表現の解析をサポート（今週、最近7日間、先月など）
  - ツール総数が13から14に増加

### 2025/11/25 - v3.4.0

**🎉 Slackプッシュサポートを新規追加**

1. **チームコラボレーションプッシュチャネル**
   - Slack Incoming Webhooksをサポート（世界的に人気のあるチームコラボレーションツール）
   - メッセージの一元管理、チームでのトレンドニュース共有に適している
   - mrkdwn形式をサポート（太字、リンクなど）

2. **複数のデプロイ方法**
   - GitHub Actions: `SLACK_WEBHOOK_URL` Secretを設定
   - Docker: 環境変数 `SLACK_WEBHOOK_URL`
   - ローカル実行: `config/config.yaml`設定ファイル

> 📖 **詳細設定チュートリアル**: [クイックスタート - Slackプッシュ](#-クイックスタート)

- setup-windows.batとsetup-windows-en.batのMCPワンクリックインストール体験を最適化

**🔧 アップグレード説明**:
- **GitHub Forkユーザー**: `main.py`、`config/config.yaml`、`.github/workflows/crawler.yml`を更新


### 2025/11/24 - v3.3.0

**🎉 Barkプッシュサポートを新規追加**

1. **iOS専用プッシュチャネル**
   - Barkプッシュをサポート（APNsベース、iOSプラットフォーム）
   - 無料オープンソース、シンプルで効率的、広告なし
   - 公式サーバーと自己ホストサーバーの両方をサポート

2. **複数のデプロイ方法**
   - GitHub Actions: `BARK_URL` Secretを設定
   - Docker: 環境変数 `BARK_URL`
   - ローカル実行: `config/config.yaml`設定ファイル

> 📖 **詳細設定チュートリアル**: [クイックスタート - Barkプッシュ](#-クイックスタート)

**🐛 バグ修正**
- `config.yaml`の`ntfy_server_url`設定が機能しない問題を修正（[#345](https://github.com/sansan0/TrendRadar/issues/345)）

**🔧 アップグレード説明**:
- **GitHub Forkユーザー**: `main.py`、`config/config.yaml`、`.github/workflows/crawler.yml`を更新


### 2025/11/23 - v3.2.0

**🎯 高度なカスタマイズ機能を新規追加**

1. **キーワードソート優先度設定**
   - 2つのソート戦略をサポート: 人気度優先 vs 設定順序優先
   - 様々な使用シナリオに対応: トレンド追跡 or パーソナライズフォーカス

2. **表示数量の精密制御**
   - グローバル設定: すべてのキーワードの表示数を統一制限
   - 個別設定: `@数字`構文を使用して特定のキーワードに制限を設定
   - プッシュ長さを効果的に制御し、重要なコンテンツを強調

> 📖 **詳細設定チュートリアル**: [キーワード設定 - 高度な設定](#キーワード高度設定)

**🔧 アップグレード説明**:
- **GitHub Forkユーザー**: `main.py`、`config/config.yaml`を更新


### 2025/11/22 - v3.1.1

- **データ異常によるクラッシュ問題を修正**: 一部のユーザーがGitHub Actions環境で遭遇した`'float' object has no attribute 'lower'`エラーを解決
- 二重防護メカニズムを追加: データ取得段階で無効なタイトル（None、float、空文字列）をフィルタリングし、関数呼び出し時に型チェックを追加
- システムの安定性を向上、データソースが異常な形式を返しても正常に動作することを保証

**アップグレード説明**（GitHub Forkユーザー）:
- 必須更新: `main.py`
- マイナーバージョンアップグレード方式を推奨: 上記ファイルをコピー置換


### 2025/11/20 - v3.1.0

- **個人WeChatプッシュサポートを新規追加**: 企業微信アプリは個人WeChatにプッシュ可能、企業微信APPのインストール不要
- 2つのメッセージ形式をサポート: `markdown`（企業微信グループロボット）と`text`（個人WeChatアプリ）
- `WEWORK_MSG_TYPE`環境変数設定を追加、GitHub Actions、Docker、docker-composeなど複数のデプロイ方法をサポート
- `text`モードは自動的にMarkdown構文をクリアし、プレーンテキストプッシュ効果を提供
- 詳細はクイックスタートの「個人WeChatプッシュ」設定説明を参照

**アップグレード説明**（GitHub Forkユーザー）:
- 必須更新: `main.py`、`config/config.yaml`
- オプション更新: `.github/workflows/crawler.yml`（GitHub Actionsデプロイを使用している場合）
- マイナーバージョンアップグレード方式を推奨: 上記ファイルをコピー置換


### 2025/11/18 - mcp-v1.0.2

  **MCPモジュール更新:**
  - 今日のニュースクエリが過去の日付の記事を返す可能性がある問題を修正


### 2025/11/12 - v3.0.5

- メール送信SSL/TLSポート設定ロジックエラーを修正
- メールサービスプロバイダー（QQ/163/126）がデフォルトでポート465（SSL）を使用するように最適化
- **Docker環境変数サポートを追加**: コア設定項目（`enable_crawler`、`report_mode`、`push_window`など）が環境変数による上書きをサポートし、NASユーザーの設定ファイル変更問題を解決（[🐳 Dockerデプロイ](#-dockerデプロイ)章を参照）


<details>
<summary><strong>👉 クリックして展開: 履歴更新</strong></summary>

### 2025/10/26 - mcp-v1.0.1

  **MCPモジュール更新:**
  - 日付クエリパラメータ渡しエラーを修正
  - すべてのツールの時間パラメータ形式を統一


### 2025/10/31 - v3.0.4

- プッシュコンテンツが長すぎることによるFeishuエラーを解決、バッチプッシュを実装


### 2025/10/23 - v3.0.3

- ntfyエラーメッセージ表示範囲を拡大


### 2025/10/21 - v3.0.2

- ntfyプッシュエンコーディング問題を修正

### 2025/10/20 - v3.0.0

**メジャーアップデート - AI分析機能リリース** 🤖

- **コア機能**:
  - MCP（Model Context Protocol）ベースの新しいAI分析サーバー
  - 13のスマート分析ツール: 基本クエリ、スマート検索、高度な分析、システム管理
  - 自然言語インタラクション: 会話を通じてニュースデータをクエリおよび分析
  - マルチクライアントサポート: Claude Desktop、Cherry Studio、Cursor、Clineなど

- **分析能力**:
  - トピックトレンド分析（人気度追跡、ライフサイクル、バイラル検出、トレンド予測）
  - データインサイト（プラットフォーム比較、アクティビティ統計、キーワード共起）
  - 感情分析、類似ニュース検索、スマートサマリー生成
  - 履歴関連ニュース検索、マルチモード検索

- **更新注記**:
  - これは独立したAI分析機能であり、既存のプッシュ機能には影響しません
  - オプション使用、既存のデプロイをアップグレードする必要はありません


### 2025/10/15 - v2.4.4

- **更新**:
  - ntfyプッシュエンコーディング問題を修正 + 1
  - プッシュ時間ウィンドウ判定問題を修正

- **アップグレード注記**:
  - マイナーバージョンアップグレード推奨


### 2025/10/10 - v2.4.3

> [nidaye996](https://github.com/sansan0/TrendRadar/issues/98)さんのUX問題発見に感謝

- **更新**:
  - 「サイレントプッシュモード」の名称を「プッシュ時間ウィンドウ制御」にリファクタリング、機能の理解を向上
  - プッシュ時間ウィンドウがオプションの追加機能であり、3つのプッシュモードと連携できることを明確化
  - コメントとドキュメントを改善し、機能の位置付けをより明確に

- **アップグレード注記**:
  - これは単なるリファクタリングです、アップグレードはオプション


### 2025/10/8 - v2.4.2

- **更新**:
  - ntfyプッシュエンコーディング問題を修正
  - 設定ファイル欠落問題を修正
  - ntfyプッシュ効果を最適化
  - GitHub Pages画像セグメント化エクスポート機能を追加

- **アップグレード注記**:
  - メジャーバージョン更新を推奨


### 2025/10/2 - v2.4.0

**ntfyプッシュ通知を追加**

- **コア機能**:
  - ntfy.sh公開サービスと自己ホスト型サーバーをサポート

- **使用例**:
  - プライバシー意識の高いユーザーに適している（自己ホスティングをサポート）
  - クロスプラットフォームプッシュ（iOS、Android、デスクトップ、Web）
  - アカウント登録不要（公開サーバー）
  - オープンソースで無料（MITライセンス）

- **アップグレード注記**:
  - メジャーバージョン更新を推奨


### 2025/09/26 - v2.3.2

- メール通知設定チェックが見逃されていた問題を修正（[#88](https://github.com/sansan0/TrendRadar/issues/88)）

**修正説明**:
- 正しいメール通知設定があっても「Webhookが設定されていません」とシステムがプロンプト表示する問題を解決


### 2025/09/22 - v2.3.1

- **メールプッシュ機能を追加**、トレンドニュースレポートをメールに送信できます
- **スマートSMTP認識**: Gmail、QQメール、Outlook、NetEaseメールなど10以上のメールサービスプロバイダーを自動検出
- **美しいHTML形式**: メールコンテンツはWeb版と同じHTML形式を使用、整形済み、モバイル対応
- **バッチ送信サポート**: 複数の受信者をサポート、カンマ区切り
- **カスタムSMTP**: SMTPサーバーとポートをカスタマイズ可能
- Dockerビルドネットワーク接続問題を修正

**使用上の注意**:
- 使用例: メールアーカイブ、チーム共有、スケジュールレポートが必要なユーザーに適している
- サポートされるメール: Gmail、QQメール、Outlook/Hotmail、163/126メール、Sinaメール、Sohuメールなど

**アップグレード注記**:
- この更新には多くの変更があります、アップグレードする場合はメジャーバージョンアップグレードを推奨


### 2025/09/17 - v2.2.0

- ワンクリックでニュースを画像として保存する機能を追加、気になるトレンドトピックを簡単に共有

**使用上の注意**:
- 使用例: Web版機能（GitHub Pages）を有効にした後
- 使用方法: スマホまたはPCでWebページを開き、上部の「画像として保存」ボタンをクリック
- 実際の効果: システムが現在のニュースレポートの美しい画像を自動作成、スマホアルバムまたはデスクトップに保存
- 共有の便利さ: この画像を友人、Moments、またはワークグループに直接送信し、他の人にあなたが発見した重要な情報を見せることができます


### 2025/09/13 - v2.1.2

- DingTalkプッシュ容量制限によるニュースプッシュ失敗を解決（バッチプッシュを使用）


### 2025/09/04 - v2.1.1

- 特定のアーキテクチャでDockerが正しく実行できない問題を修正
- 公式Dockerイメージwantcat/trendradarを正式リリース、マルチアーキテクチャをサポート
- Dockerデプロイプロセスを最適化、ローカルビルドなしで迅速に使用可能


### 2025/08/30 - v2.1.0

**コア改善**:
- **プッシュロジック最適化**: 「実行ごとにプッシュ」から「時間ウィンドウ内で制御可能なプッシュ」に変更
- **時間ウィンドウ制御**: プッシュ時間範囲を設定でき、非勤務時間の邪魔を回避
- **プッシュ頻度オプション**: 時間ウィンドウ内の単一プッシュまたは複数プッシュをサポート

**アップグレード注記**:
- この機能はデフォルトで無効、config.yamlでプッシュ時間ウィンドウ制御を手動で有効にする必要があります
- アップグレードにはmain.pyとconfig.yamlファイルの両方の更新が必要


### 2025/08/27 - v2.0.4

- このバージョンはバグ修正ではなく、重要なリマインダーです
- Webhookは適切に保管し、公開しないでください、公開しないでください、公開しないでください
- GitHubでfork経由でこのプロジェクトをデプロイした場合は、WebhookをGitHub Secretに配置し、config.yamlには配置しないでください
- すでにWebhookを公開した場合またはconfig.yamlに配置した場合は、削除して再生成することを推奨


### 2025/08/06 - v2.0.3

- GitHub PagesのWeb版効果を最適化、モバイル使用に便利


### 2025/07/28 - v2.0.2

- コードをリファクタリング
- バージョン番号が変更を見逃しやすい問題を解決


### 2025/07/27 - v2.0.1

**修正された問題**:

1. Docker shellスクリプトの行末がCRLFであることによる実行例外問題
2. frequency_words.txtが空の場合にニュース送信も空になるロジック問題
  - 修正後、frequency_words.txtを空に選択すると、**すべてのニュースをプッシュ**しますが、メッセージプッシュサイズによって制限されます。以下のように調整してください
    - オプション1: モバイルプッシュをオフにし、GitHub Pagesデプロイのみを選択（これが最も完全な情報を得る方法です。すべてのプラットフォームのトレンドを**カスタムトレンドアルゴリズム**で再ソートします）
    - オプション2: プッシュプラットフォームを削減、**WeWork**または**Telegram**を優先（これら2つのプッシュにバッチプッシュ機能を作成しました。バッチプッシュはプッシュ体験に影響しますが、これら2つのプラットフォームのみがプッシュ容量が非常に少ないため、バッチプッシュ機能を作成する必要がありましたが、少なくとも完全な情報を保証できます）
    - オプション3: オプション2と組み合わせ、モードをcurrentまたはincrementalに選択すると、一度のプッシュコンテンツを効果的に削減できます


### 2025/07/17 - v2.0.0

**メジャーリファクタリング**:
- 設定管理のリファクタリング: すべての設定を`config/config.yaml`ファイルで管理（main.pyはまだ分割していません、コピーとアップグレードに便利）
- 実行モードのアップグレード: 3つのモードをサポート - `daily`（日次サマリー）、`current`（現在のランキング）、`incremental`（増分監視）
- Dockerサポート: 完全なDockerデプロイソリューション、コンテナ化運用をサポート

**設定ファイルの説明**:
- `config/config.yaml` - メイン設定ファイル（アプリケーション設定、クローラー設定、通知設定、プラットフォーム設定など）
- `config/frequency_words.txt` - キーワード設定（監視語彙設定）


### 2025/07/09 - v1.4.1

**新機能**: 増分プッシュを追加（main.pyの上部にFOCUS_NEW_ONLYを設定）、このスイッチは持続的な熱量ではなく新しいトピックのみに関心があり、新しいコンテンツが表示されたときのみ通知を送信します。

**修正された問題**: 特定の状況下で、特殊記号を含む一部のニュースが時々書式設定例外を引き起こしました。


### 2025/06/23 - v1.3.0

WeWorkとTelegramプッシュメッセージには長さ制限があるため、メッセージを分割してプッシュする方法を採用しました。開発ドキュメントは[WeWork](https://developer.work.weixin.qq.com/document/path/91770)と[Telegram](https://core.telegram.org/bots/api)を参照


### 2025/06/21 - v1.2.1

このバージョンより前は、main.pyだけでなくcrawler.ymlもコピー置換が必要です
https://github.com/sansan0/TrendRadar/blob/master/.github/workflows/crawler.yml


### 2025/06/19 - v1.2.0

> Claude Researchが各プラットフォームAPIを整理してくれたおかげで、プラットフォーム適応を迅速に完了できました（コードはより冗長ですが〜

1. Telegram、WeWork、DingTalkプッシュチャネルをサポート、マルチチャネル設定と同時プッシュをサポート


### 2025/06/18 - v1.1.0

> **200 stars⭐** 達成、皆さんと引き続き祝います〜

1. 重要な更新、重みを追加、今見るニュースは最も熱く最も関心のあるものが上部に表示されます
2. ドキュメント使用を更新、最近多くの機能を更新したため、以前の使用ドキュメントは簡単に書きました（下記の⚙️ frequency_words.txt完全設定チュートリアルを参照）


### 2025/06/16 - v1.0.0

1. プロジェクトの新バージョン更新リマインダーを追加、デフォルトでオン、オフにしたい場合はmain.pyで"FEISHU_SHOW_VERSION_UPDATE": TrueをFalseに変更できます


### 2025/06/13+14

1. 互換性コードを削除、以前にフォークした学生は、コードを直接コピーすると同日に例外が表示されます（翌日に正常に回復します）
2. Feishuとhtmlの下部に新しいニュース表示を追加


### 2025/06/09

**100 stars⭐** 達成、祝うための小さな機能を書いています

frequency_words.txtファイルに**必須単語**機能を追加、+記号を使用

1. 必須単語の構文は以下の通り:
   三蔵法師または八戒の両方がタイトルに表示される必要があり、プッシュニュースに含まれます

```
+三蔵法師
+八戒
```

2. フィルター単語の優先度が高い:
   タイトルフィルター単語が三蔵法師のお経にマッチする場合、必須単語に三蔵法師があっても表示されません

```
+三蔵法師
!三蔵法師のお経
```


### 2025/06/02

1. **Webページ**と**Feishuメッセージ**がスマホから詳細ニュースに直接ジャンプすることをサポート
2. 表示効果の最適化 + 1


### 2025/05/26

1. Feishuメッセージ表示効果を最適化

</details>


## 🚀 クイックスタート

> 設定後、ニュースデータは1時間後に更新されます。加速するには、[ステップ4]を参照して設定を手動でテストしてください

1. **このプロジェクトをFork**してあなたのGitHubアカウントへ

   - このページの右上の「Fork」ボタンをクリック

2. **GitHub Secretsを設定（必要なプラットフォームを選択）**:

   フォークしたリポジトリで、`Settings` > `Secrets and variables` > `Actions` > `New repository secret`に移動

   **📌 重要な指示（よくお読みください）:**

   - ✅ **1つの名前に対して1つのSecret**: 各設定項目について、「New repository secret」ボタンを1回クリックし、「Name」と「Secret」のペアを入力します
   - ✅ **保存後に値が見えないのは正常です**: セキュリティ上の理由から、保存後は再編集時にNameしか見えず、Secret値は見えません
   - ⚠️ **カスタム名を作成しないでください**: Secret Nameは以下にリストされている名前を**厳密に使用**する必要があります（例：`WEWORK_WEBHOOK_URL`、`FEISHU_WEBHOOK_URL`など）。名前を変更したり新しい名前を任意に作成したりしないでください。そうしないとシステムが認識しません
   - 💡 **複数のプラットフォームを設定可能**: システムは設定されたすべてのプラットフォームに通知を送信します

   **設定例:**

   <img src="_image/secrets.png" alt="GitHub Secrets Configuration Example"/>

   上記のように、各行は1つの設定項目です:
   - **Name**: 以下の展開セクションにリストされている固定名を使用する必要があります（例：`WEWORK_WEBHOOK_URL`）
   - **Secret（値）**: 対応するプラットフォームから取得した実際のコンテンツを入力します（例：Webhook URL、Tokenなど）

   <br>


   <details>
   <summary> <strong>👉 クリックして展開: WeWorkボット</strong>（最も簡単で最速の設定）</summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `WEWORK_WEBHOOK_URL`（この名前をコピー＆ペーストしてください。タイプミスを避けるため手動入力しないでください）
   - **Secret（値）**: あなたのWeWorkボットWebhookアドレス

   <br>

   **ボット設定手順:**

   #### モバイル設定:
   1. WeWorkアプリを開く → 対象の内部グループチャットに入る
   2. 右上の「…」ボタンをクリック → 「メッセージプッシュ」を選択
   3. 「追加」をクリック → 名前に「TrendRadar」を入力
   4. Webhookアドレスをコピーし、保存をクリック、コピーしたコンテンツを上記のGitHub Secretに貼り付け

   #### PC設定プロセスも同様
   </details>

   <details>
   <summary> <strong>👉 クリックして展開: 個人WeChatプッシュ</strong>（企業微信アプリ経由、個人WeChatにプッシュ）</summary>
   <br>

   > このソリューションは企業微信のプラグインメカニズムに基づいているため、プッシュスタイルはプレーンテキスト（Markdown形式なし）ですが、個人WeChatに直接プッシュでき、企業微信APPのインストールは不要です。

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `WEWORK_WEBHOOK_URL`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたの企業微信アプリWebhookアドレス

   - **Name**: `WEWORK_MSG_TYPE`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: `text`

   <br>

   **設定手順:**

   1. 上記の企業微信ロボットWebhook設定を完了
   2. `WEWORK_MSG_TYPE` Secretを追加、値を`text`に設定
   3. 下記の画像に従って、個人WeChatを関連付け
   4. 設定完了後、スマホの企業微信APPは削除可能

   <img src="_image/wework.png" title="個人WeChatプッシュ設定"/>

   **説明**:
   - 企業微信ロボットと同じWebhookアドレスを使用
   - 違いはメッセージ形式: `text`はプレーンテキスト、`markdown`はリッチテキスト（デフォルト）
   - プレーンテキスト形式は自動的にすべてのMarkdown構文を削除（太字、リンクなど）

   </details>

   <details>
   <summary> <strong>👉 クリックして展開: Feishuボット</strong>（最もユーザーフレンドリーなメッセージ表示）</summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `FEISHU_WEBHOOK_URL`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのFeishuボットWebhookアドレス（リンクはhttps://www.feishu.cn/flow/api/trigger-webhook/********で始まります）
   <br>

   2つの方法が利用可能です。**方法1**はより簡単で、**方法2**はより複雑です（ただし安定したプッシュ）

   方法1は**ziventian**さんによって発見され提案されました。感謝します。デフォルトは個人プッシュで、グループプッシュは[#97](https://github.com/sansan0/TrendRadar/issues/97)経由で設定できます

   **方法1:**

   > 一部のユーザーにとって、「システムエラー」を回避するために追加の操作が必要です。モバイルでボットを検索してFeishuボットアプリケーションを有効にする必要があります（コミュニティからの提案、参照可能）

   1. PCブラウザで開く https://botbuilder.feishu.cn/home/my-command

   2. 「新しいボットコマンド」をクリック

   3. 「トリガーを選択」をクリックし、下にスクロールして「Webhookトリガー」をクリック

   4. 「Webhookアドレス」が表示されます。このリンクを一時的にローカルメモ帳にコピーし、次の手順を続けます

   5. 「パラメータ」に以下の内容を入れ、「完了」をクリック

   ```json
   {
     "message_type": "text",
     "content": {
       "total_titles": "{{Content}}",
       "timestamp": "{{Content}}",
       "report_type": "{{Content}}",
       "text": "{{Content}}"
     }
   }
   ```

   6. 「アクションを選択」>「公式ボット経由で送信」をクリック

   7. メッセージタイトルに「TrendRadarトレンドモニター」と入力

   8. 最も重要な部分、+ボタンをクリックし、「Webhookトリガー」を選択し、画像のように配置

   ![Feishuボット設定例](_image/image.png)

   9. 設定後、ステップ4のWebhookアドレスをGitHub Secretsの`FEISHU_WEBHOOK_URL`に入れます

   <br>

   **方法2:**

   1. PCブラウザで開く https://botbuilder.feishu.cn/home/my-app

   2. 「新建机器人应用（新しいボットアプリケーションを作成）」をクリック

   3. 作成したアプリケーションに入った後、「流程涉及（フロー設計）」>「创建流程（フロー作成）」>「选择触发器（トリガーを選択）」をクリック

   4. 下にスクロールして「Webhook 触発（Webhookトリガー）」をクリック

   5. 「Webhook 地址（Webhookアドレス）」が表示されます。このリンクを一時的にローカルメモ帳にコピーし、次の手順を続けます

   6. 「参数（パラメータ）」に以下の内容を入れ、「完成（完了）」をクリック

   ```json
   {
     "message_type": "text",
     "content": {
       "total_titles": "{{内容}}",
       "timestamp": "{{内容}}",
       "report_type": "{{内容}}",
       "text": "{{内容}}"
     }
   }
   ```

   7. 「选择操作（アクションを選択）」>「发送飞书消息（Feishuメッセージを送信）」をクリック、「群消息（グループメッセージ）」にチェックを入れ、下の入力ボックスをクリックして「我管理的群组（私が管理するグループ）」をクリック（グループがない場合は、Feishuアプリでグループを作成できます）

   8. メッセージタイトルに「TrendRadar 热点监控（TrendRadarトレンドモニター）」と入力

   9. 最も重要な部分です。+ボタンをクリックし、「Webhook 触发（Webhookトリガー）」を選択し、以下の画像のように配置します

   ![Feishuボット設定例](_image/image.png)

   10. 設定後、ステップ5でコピーしたWebhookアドレスをGitHub Secretsの`FEISHU_WEBHOOK_URL`に設定します

   </details>

   <details>
   <summary> <strong>👉 クリックして展開: DingTalkボット</strong></summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `DINGTALK_WEBHOOK_URL`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのDingTalkボットWebhookアドレス

   <br>

   **ボット設定手順:**

   1. **ボットを作成（PCのみ）**:
      - DingTalk PCクライアントを開き、対象のグループチャットに入る
      - グループ設定アイコン（⚙️）をクリック → 下にスクロールして「ボット」を見つけてクリック
      - 「ボットを追加」→「カスタム」を選択

   2. **ボットを設定**:
      - ボット名を設定
      - **セキュリティ設定**:
        - **カスタムキーワード**: 「Trending」または「热点」を設定

   3. **設定を完了**:
      - 利用規約に同意 → 「完了」をクリック
      - 取得したWebhook URLをコピー
      - URLをGitHub Secrets `DINGTALK_WEBHOOK_URL`に入れる

   **注意**: モバイルはメッセージのみ受信でき、新しいボットを作成できません。
   </details>

   <details>
   <summary> <strong>👉 クリックして展開: Telegramボット</strong></summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `TELEGRAM_BOT_TOKEN`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのTelegram Bot Token

   - **Name**: `TELEGRAM_CHAT_ID`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのTelegram Chat ID

   **注意**: Telegramは**2つの**Secretsが必要です。「New repository secret」ボタンを2回クリックして別々に追加してください

   <br>

   **ボット設定手順:**

   1. **ボットを作成**:
      - Telegramで`@BotFather`を検索（大文字小文字に注意、青い認証チェックマークがあり、月間約37849827ユーザーを表示、これが公式で、偽アカウントに注意）
      - `/newbot`コマンドを送信して新しいボットを作成
      - ボット名を設定（「bot」で終わる必要があり、重複名になりやすいため、創造的に考えてください）
      - Bot Tokenを取得（形式：`123456789:AAHfiqksKZ8WmR2zSjiQ7_v4TMAKdiHm9T0`）

   2. **Chat IDを取得**:

      **方法1: 公式API経由**
      - まずボットにメッセージを送信
      - 訪問: `https://api.telegram.org/bot<あなたのBot Token>/getUpdates`
      - 返されたJSONで`"chat":{"id":number}`の数値を見つける

      **方法2: サードパーティツールを使用**
      - `@userinfobot`を検索して`/start`を送信
      - ユーザーIDをChat IDとして取得

   3. **GitHubに設定**:
      - `TELEGRAM_BOT_TOKEN`: ステップ1のBot Tokenを入力
      - `TELEGRAM_CHAT_ID`: ステップ2のChat IDを入力
   </details>

   <details>
   <summary> <strong>👉 クリックして展開: Emailプッシュ</strong>（すべての主要メールプロバイダーをサポート）</summary>
   <br>

   - 注意: メール一括送信の悪用を防ぐため、現在の一括送信ではすべての受信者が互いのメールアドレスを見ることができます。
   - メール送信を設定したことがない場合は、試さないことをお勧めします

   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `EMAIL_FROM`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: 送信者のメールアドレス

   - **Name**: `EMAIL_PASSWORD`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: メールパスワードまたは認証コード

   - **Name**: `EMAIL_TO`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: 受信者のメールアドレス（複数の場合はカンマで区切る、またはEMAIL_FROMと同じにして自分宛に送信）

   - **Name**: `EMAIL_SMTP_SERVER`（オプション、この名前をコピー＆ペーストしてください）
   - **Secret（値）**: SMTPサーバーアドレス（空白のままにすると自動検出）

   - **Name**: `EMAIL_SMTP_PORT`（オプション、この名前をコピー＆ペーストしてください）
   - **Secret（値）**: SMTPポート（空白のままにすると自動検出）

   **注意**: Emailプッシュには少なくとも**3つの必須**Secrets（EMAIL_FROM、EMAIL_PASSWORD、EMAIL_TO）が必要で、最後の2つはオプションです

   <br>

   **サポートされるメールプロバイダー**（SMTP設定を自動検出）:

   | プロバイダー | ドメイン | SMTPサーバー | ポート | 暗号化 |
   |----------|--------|-------------|------|-----------|
   | **Gmail** | gmail.com | smtp.gmail.com | 587 | TLS |
   | **QQメール** | qq.com | smtp.qq.com | 465 | SSL |
   | **Outlook** | outlook.com | smtp-mail.outlook.com | 587 | TLS |
   | **Hotmail** | hotmail.com | smtp-mail.outlook.com | 587 | TLS |
   | **Live** | live.com | smtp-mail.outlook.com | 587 | TLS |
   | **163メール** | 163.com | smtp.163.com | 465 | SSL |
   | **126メール** | 126.com | smtp.126.com | 465 | SSL |
   | **Sinaメール** | sina.com | smtp.sina.com | 465 | SSL |
   | **Sohuメール** | sohu.com | smtp.sohu.com | 465 | SSL |

   > **自動検出**: 上記のメールを使用する場合、`EMAIL_SMTP_SERVER`と`EMAIL_SMTP_PORT`を手動で設定する必要はなく、システムが自動検出します。
   >
   > **フィードバック説明**:
   > - **他のメール**を使用してテストに成功した場合は、[Issues](https://github.com/sansan0/TrendRadar/issues)を開いてお知らせください。サポートリストに追加します
   > - 上記のメール設定に誤りがある場合や使用できない場合も、[Issues](https://github.com/sansan0/TrendRadar/issues)を開いてフィードバックし、プロジェクトの改善にご協力ください

   **一般的なメール設定:**

   #### QQメール:
   1. QQメールWebバージョンにログイン → 設定 → アカウント
   2. POP3/SMTPサービスを有効化
   3. 認証コードを生成（16文字のコード）
   4. `EMAIL_PASSWORD`に認証コードを入力、QQパスワードではありません

   #### Gmail:
   1. 2段階認証を有効化
   2. アプリ固有のパスワードを生成
   3. `EMAIL_PASSWORD`にアプリ固有のパスワードを入力

   #### 163/126メール:
   1. Webバージョンにログイン → 設定 → POP3/SMTP/IMAP
   2. SMTPサービスを有効化
   3. クライアント認証コードを設定
   4. `EMAIL_PASSWORD`に認証コードを入力
   <br>

   **詳細設定**:
   自動検出が失敗した場合、手動でSMTPを設定:
   - `EMAIL_SMTP_SERVER`: smtp.gmail.comなど
   - `EMAIL_SMTP_PORT`: 587（TLS）または465（SSL）など
   <br>

   **複数の受信者（注意: 英語のカンマ区切り）**:
   - EMAIL_TO="user1@example.com,user2@example.com,user3@example.com"

   </details>

   <details>
   <summary> <strong>👉 クリックして展開: ntfyプッシュ</strong>（オープンソース、無料、自己ホスト可能）</summary>
   <br>

   **2つの使用方法:**

   ### 方法1: 無料使用（初心者に推奨）🆓

   **特徴**:
   - ✅ アカウント登録不要、すぐに使用可能
   - ✅ 250メッセージ/日（90%のユーザーに十分）
   - ✅ トピック名が「パスワード」（推測しにくい名前を選ぶ必要がある）
   - ⚠️ メッセージは暗号化されていない、機密情報には不向き、ただし私たちの非機密プロジェクト情報には適している

   **クイックスタート:**

   1. **ntfyアプリをダウンロード**:
      - Android: [Google Play](https://play.google.com/store/apps/details?id=io.heckel.ntfy) / [F-Droid](https://f-droid.org/en/packages/io.heckel.ntfy/)
      - iOS: [App Store](https://apps.apple.com/us/app/ntfy/id1625396347)
      - デスクトップ: [ntfy.sh](https://ntfy.sh)を訪問

   2. **トピックを購読**（推測しにくい名前を選ぶ）:
      ```
      推奨形式: trendradar-{あなたのイニシャル}-{ランダムな数字}

      中国語は使用できません

      ✅ 良い例: trendradar-zs-8492
      ❌ 悪い例: news, alerts（推測しやすい）
      ```

   3. **GitHub Secretを設定（⚠️ 名前は正確に一致する必要があります）**:
      - **Name**: `NTFY_TOPIC`（この名前をコピー＆ペーストしてください。手動入力しないでください）
      - **Secret（値）**: 購読したトピック名を入力

      - **Name**: `NTFY_SERVER_URL`（オプション、この名前をコピー＆ペーストしてください）
      - **Secret（値）**: 空白のまま（デフォルトでntfy.shを使用）

      - **Name**: `NTFY_TOKEN`（オプション、この名前をコピー＆ペーストしてください）
      - **Secret（値）**: 空白のまま

      **注意**: ntfyには少なくとも1つの必須Secret（NTFY_TOPIC）が必要で、最後の2つはオプションです

   4. **テスト**:
      ```bash
      curl -d "テストメッセージ" ntfy.sh/あなたのトピック名
      ```

   ---

   ### 方法2: 自己ホスト（完全なプライバシー制御）🔒

   **対象ユーザー**: サーバーを持っている、完全なプライバシーを追求、高い技術能力

   **利点**:
   - ✅ 完全にオープンソース（Apache 2.0 + GPLv2）
   - ✅ 完全なデータ自己制御
   - ✅ 制限なし
   - ✅ ゼロコスト

   **Dockerワンクリックデプロイ**:
   ```bash
   docker run -d \
     --name ntfy \
     -p 80:80 \
     -v /var/cache/ntfy:/var/cache/ntfy \
     binwiederhier/ntfy \
     serve --cache-file /var/cache/ntfy/cache.db
   ```

   **TrendRadarを設定**:
   ```yaml
   NTFY_SERVER_URL: https://ntfy.yourdomain.com
   NTFY_TOPIC: trendradar-alerts  # 自己ホストでは簡単な名前を使用可能
   NTFY_TOKEN: tk_your_token  # オプション: アクセス制御を有効化
   ```

   **アプリで購読**:
   - 「別のサーバーを使用」をクリック
   - サーバーアドレスを入力
   - トピック名を入力
   - （オプション）ログイン資格情報を入力

   ---

   **FAQ:**

   <details>
   <summary><strong>Q1: 無料版で十分ですか？</strong></summary>

   250メッセージ/日はほとんどのユーザーに十分です。30分のクロール間隔で、約48プッシュ/日、完全に十分です。
   </details>

   <details>
   <summary><strong>Q2: トピック名は本当に安全ですか？</strong></summary>

   ランダムで十分に長い名前（`trendradar-zs-8492-news`など）を選択すれば、ブルートフォースはほぼ不可能です:
   - ntfyには厳格なレート制限があります（1リクエスト/秒）
   - 64文字の選択肢（A-Z、a-z、0-9、_、-）
   - 10個のランダム文字には64^10の可能性があります（クラックに何年もかかる）
   </details>

   ---

   **推奨される選択:**

   | ユーザータイプ | 推奨 | 理由 |
   |-----------|-------------|--------|
   | 一般ユーザー | 方法1（無料） | シンプル、高速、十分 |
   | 技術ユーザー | 方法2（自己ホスト） | 完全な制御、無制限 |
   | 高頻度ユーザー | 方法3（有料） | 公式ウェブサイトを確認 |

   **関連リンク:**
   - [ntfy公式ドキュメント](https://docs.ntfy.sh/)
   - [自己ホストチュートリアル](https://docs.ntfy.sh/install/)
   - [GitHubリポジトリ](https://github.com/binwiederhier/ntfy)

   </details>

   <details>
   <summary> <strong>👉 クリックして展開: Barkプッシュ</strong>（iOS専用、シンプルで効率的）</summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `BARK_URL`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのBarkプッシュURL

   <br>

   **Bark紹介:**

   BarkはiOSプラットフォーム用の無料オープンソースプッシュツールで、シンプル、高速、広告なしが特徴です。

   **使用方法:**

   ### 方法1: 公式サーバーを使用（初心者に推奨）🆓

   1. **Bark Appをダウンロード**:
      - iOS: [App Store](https://apps.apple.com/cn/app/bark-给你的手机发推送/id1403753865)

   2. **プッシュURLを取得**:
      - Bark Appを開く
      - ホーム画面に表示されるプッシュURLをコピー（形式: `https://api.day.app/your_device_key`）
      - URLをGitHub Secretsの`BARK_URL`に設定

   ### 方法2: 自己ホストサーバー（完全なプライバシー制御）🔒

   **対象ユーザー**: サーバーを持っている、完全なプライバシーを追求、高い技術能力

   **Dockerワンクリックデプロイ**:
   ```bash
   docker run -d \
     --name bark-server \
     -p 8080:8080 \
     finab/bark-server
   ```

   **TrendRadarを設定**:
   ```yaml
   BARK_URL: http://your-server-ip:8080/your_device_key
   ```

   ---

   **注意事項:**
   - ✅ BarkはAPNsプッシュを使用、単一メッセージの最大4KB
   - ✅ 自動バッチプッシュをサポート、メッセージ長を気にする必要なし
   - ✅ プッシュ形式はプレーンテキスト（Markdown構文は自動削除）
   - ⚠️ iOSプラットフォームのみサポート

   **関連リンク:**
   - [Bark公式ウェブサイト](https://bark.day.app/)
   - [Bark GitHubリポジトリ](https://github.com/Finb/Bark)
   - [Bark Server自己ホストチュートリアル](https://github.com/Finb/bark-server)

   </details>

   <details>
   <summary> <strong>👉 クリックして展開: Slackプッシュ</strong></summary>
   <br>

   **GitHub Secret設定（⚠️ 名前は正確に一致する必要があります）:**
   - **Name**: `SLACK_WEBHOOK_URL`（この名前をコピー＆ペーストしてください。手動入力しないでください）
   - **Secret（値）**: あなたのSlack Incoming Webhook URL

   <br>

   **Slack紹介:**

   Slackはチームコラボレーションツールで、Incoming WebhooksはSlackチャンネルにメッセージをプッシュできます。

   **設定手順:**

   ### ステップ1: Slack Appを作成

   1. **Slack APIページにアクセス**:
      - https://api.slack.com/apps?new_app=1 を開く
      - ログインしていない場合は、まずSlackワークスペースにログイン

   2. **作成方法を選択**:
      - **「From scratch」**（ゼロから作成）をクリック

   3. **App情報を入力**:
      - **App Name**: アプリ名を入力（例: `TrendRadar`または`トレンドニュースモニター`）
      - **Workspace**: ドロップダウンリストからワークスペースを選択
      - **「Create App」**ボタンをクリック

   ### ステップ2: Incoming Webhooksを有効化

   1. **Incoming Webhooksに移動**:
      - 左側メニューで**「Incoming Webhooks」**を見つけてクリック

   2. **機能を有効化**:
      - **「Activate Incoming Webhooks」**スイッチを見つける
      - スイッチを`OFF`から`ON`に切り替え
      - ページは自動的に更新され、新しい設定オプションが表示されます

   ### ステップ3: Webhook URLを生成

   1. **新しいWebhookを追加**:
      - ページ下部にスクロール
      - **「Add New Webhook to Workspace」**ボタンをクリック

   2. **ターゲットチャンネルを選択**:
      - システムは認証ページをポップアップ
      - ドロップダウンリストからメッセージを受信するチャンネルを選択（例: `#トレンドニュース`）
      - ⚠️ プライベートチャンネルを選択する場合は、まずそのチャンネルに参加する必要があります

   3. **アプリを認証**:
      - **「Allow」**ボタンをクリックして認証を完了
      - システムは自動的に設定ページにリダイレクト

   ### ステップ4: Webhook URLをコピーして保存

   1. **生成されたURLを表示**:
      - 「Webhook URLs for Your Workspace」エリア
      - 先ほど生成されたWebhook URLが表示されます
      - 形式: `https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX`

   2. **URLをコピー**:
      - URLの右側にある**「Copy」**ボタンをクリック
      - または手動でURLを選択してコピー

   3. **TrendRadarに設定**:
      - **GitHub Actions**: URLをGitHub Secretsの`SLACK_WEBHOOK_URL`に追加
      - **ローカルテスト**: `config/config.yaml`の`slack_webhook_url`フィールドに入力
      - **Dockerデプロイ**: `docker/.env`ファイルの`SLACK_WEBHOOK_URL`変数に追加

   ---

   **注意事項:**
   - ✅ Markdown形式をサポート（自動的にSlack mrkdwnに変換）
   - ✅ 自動バッチプッシュをサポート（各バッチ4KB）
   - ✅ チームコラボレーションに適している、メッセージの一元管理
   - ⚠️ Webhook URLには秘密鍵が含まれています、公開しないでください

   **メッセージ形式プレビュー:**
   ```
   *[第1/2バッチ]*

   📊 *トレンドキーワード統計*

   🔥 *[1/3] AI ChatGPT* : 2件

     1. [百度ホット検索] 🆕 ChatGPT-5正式リリース *[1]* - 09時15分 (1回)

     2. [今日のヘッドライン] AIチップコンセプト株急騰 *[3]* - [08時30分 ~ 10時45分] (3回)
   ```

   **関連リンク:**
   - [Slack Incoming Webhooks公式ドキュメント](https://api.slack.com/messaging/webhooks)
   - [Slack APIアプリ管理](https://api.slack.com/apps)

   </details>

   > **💡 初心者クイックスタートのヒント**:
   >
   > 初回デプロイでは、まず**GitHub Secrets**の設定を完了（1つのプッシュプラットフォームを選択）してから、[ステップ4]にジャンプしてプッシュが成功するかテストすることをお勧めします。
   >
   > 一時的に`config/config.yaml`と`frequency_words.txt`を**変更しないでください**。プッシュテストが成功した後、必要に応じてこれらの設定を調整してください。


3. **設定注記:**:

    - **プッシュ設定**: [config/config.yaml](config/config.yaml)でプッシュモードと通知オプションを設定
    - **キーワード設定**: [config/frequency_words.txt](config/frequency_words.txt)で興味のあるキーワードを追加
    - **プッシュ頻度調整**: [.github/workflows/crawler.yml](.github/workflows/crawler.yml)で慎重に調整、欲張らないでください

    **注意**: 明示的にドキュメント化された設定項目のみを調整することをお勧めします。他のオプションは主に作者の開発テスト用です

4. **ニュースプッシュを手動テスト**:

    私のプロジェクトを例として使用していますが、**あなたのフォークした**プロジェクトでテストする必要があります

    1. **Actionsに入る**: https://github.com/sansan0/TrendRadar/actions
    2. 「Hot News Crawler」を見つけてクリック。このテキストが表示されない場合は、[#109](https://github.com/sansan0/TrendRadar/issues/109)を参照して解決してください
    3. 「Run workflow」ボタンをクリックして実行、約1分待つとデータがスマホに届きます


## 🐳 Dockerデプロイ

#### 方法1: クイック体験（ワンラインコマンド）

**Linux/macOSシステム:**
```bash
# 設定ディレクトリを作成し、設定ファイルをダウンロード
mkdir -p config output
wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/config.yaml -P config/
wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/frequency_words.txt -P config/
```
または**手動作成**:
1. 現在のディレクトリに`config`フォルダを作成
2. 設定ファイルをダウンロード:
   - https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/config.yamlにアクセス → 右クリック「名前を付けて保存」→ `config\config.yaml`に保存
   - https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/frequency_words.txtにアクセス → 右クリック「名前を付けて保存」→ `config\frequency_words.txt`に保存

最終的なディレクトリ構造は次のようになります:
```
現在のディレクトリ/
└── config/
    ├── config.yaml
    └── frequency_words.txt
```

```bash
docker run -d --name trend-radar \
  -v ./config:/app/config:ro \
  -v ./output:/app/output \
  -e FEISHU_WEBHOOK_URL="your feishu webhook" \
  -e DINGTALK_WEBHOOK_URL="your dingtalk webhook" \
  -e WEWORK_WEBHOOK_URL="your wework webhook" \
  -e TELEGRAM_BOT_TOKEN="your telegram_bot_token" \
  -e TELEGRAM_CHAT_ID="your telegram_chat_id" \
  -e EMAIL_FROM="your sender email" \
  -e EMAIL_PASSWORD="your email password or auth code" \
  -e EMAIL_TO="recipient email" \
  -e CRON_SCHEDULE="*/30 * * * *" \
  -e RUN_MODE="cron" \
  -e IMMEDIATE_RUN="true" \
  wantcat/trendradar:latest
```

#### 方法2: docker-composeを使用（推奨）

1. **プロジェクトディレクトリと設定を作成**:
   ```bash
   # ディレクトリ構造を作成
   mkdir -p trendradar/{config,docker}
   cd trendradar

   # 設定ファイルテンプレートをダウンロード
   wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/config.yaml -P config/
   wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/config/frequency_words.txt -P config/

   # docker-compose設定をダウンロード
   wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/docker/.env
   wget https://raw.githubusercontent.com/sansan0/TrendRadar/master/docker/docker-compose.yml
   ```

最終的なディレクトリ構造は次のようになります:
```
現在のディレクトリ/
├── config/
│   ├── config.yaml
│   └── frequency_words.txt
└── docker/
    ├── .env
    └── docker-compose.yml
```

2. **設定ファイルの説明**:
   - `config/config.yaml` - アプリケーションメイン設定（レポートモード、プッシュ設定など）
   - `config/frequency_words.txt` - キーワード設定（興味のあるトレンドキーワードを設定）
   - `.env` - 環境変数設定（Webhook URLとスケジュールタスク）

   **⚙️ 環境変数上書きメカニズム（v3.0.5+）**

   NASや他のDocker環境で**config.yamlの変更が反映されない**問題が発生した場合、環境変数を介して直接設定を上書きできます:

   | 環境変数 | 対応する設定 | 例の値 | 説明 |
   |---------------------|---------------------|---------------|-------------|
   | `ENABLE_CRAWLER` | `crawler.enable_crawler` | `true` / `false` | クローラーを有効化 |
   | `ENABLE_NOTIFICATION` | `notification.enable_notification` | `true` / `false` | 通知を有効化 |
   | `REPORT_MODE` | `report.mode` | `daily` / `incremental` / `current`| レポートモード |
   | `PUSH_WINDOW_ENABLED` | `notification.push_window.enabled` | `true` / `false` | プッシュ時間ウィンドウスイッチ |
   | `PUSH_WINDOW_START` | `notification.push_window.time_range.start` | `08:00` | プッシュ開始時刻 |
   | `PUSH_WINDOW_END` | `notification.push_window.time_range.end` | `22:00` | プッシュ終了時刻 |
   | `FEISHU_WEBHOOK_URL` | `notification.webhooks.feishu_url` | `https://...` | Feishu Webhook |

   **設定の優先順位**: 環境変数 > config.yaml

   **使用方法**:
   - `.env`ファイルを変更し、必要な設定のコメントを解除して入力
   - またはNAS/Synology Docker管理インターフェースの「環境変数」で直接追加
   - コンテナを再起動して有効化: `docker-compose restart`


3. **サービスを開始**:
   ```bash
   # 最新のイメージをプルして開始
   docker-compose pull
   docker-compose up -d
   ```

4. **実行ステータスを確認**:
   ```bash
   # ログを表示
   docker logs -f trend-radar

   # コンテナステータスを表示
   docker ps | grep trend-radar
   ```

#### 方法3: ローカルビルド（開発者オプション）

カスタムコード変更が必要な場合や独自のイメージをビルドする場合:

```bash
# プロジェクトをクローン
git clone https://github.com/sansan0/TrendRadar.git
cd TrendRadar

# 設定ファイルを変更
vim config/config.yaml
vim config/frequency_words.txt

# ビルドバージョンのdocker-composeを使用
cd docker
cp docker-compose-build.yml docker-compose.yml

# ビルドして開始
docker-compose build
docker-compose up -d
```

#### イメージ更新

```bash
# 方法1: 手動更新
docker pull wantcat/trendradar:latest
docker-compose down
docker-compose up -d

# 方法2: docker-compose更新を使用
docker-compose pull
docker-compose up -d
```

#### サービス管理コマンド

```bash
# 実行ステータスを表示
docker exec -it trend-radar python manage.py status

# クローラーを1回手動実行
docker exec -it trend-radar python manage.py run

# リアルタイムログを表示
docker exec -it trend-radar python manage.py logs

# 現在の設定を表示
docker exec -it trend-radar python manage.py config

# 出力ファイルを表示
docker exec -it trend-radar python manage.py files

# ヘルプ情報を表示
docker exec -it trend-radar python manage.py help

# コンテナを再起動
docker restart trend-radar

# コンテナを停止
docker stop trend-radar

# コンテナを削除（データは保持）
docker rm trend-radar
```

#### データ永続化

生成されたレポートとデータはデフォルトで`./output`ディレクトリに保存されます。コンテナが再起動または削除されてもデータは永続化されます。

#### トラブルシューティング

```bash
# コンテナステータスを確認
docker inspect trend-radar

# コンテナログを表示
docker logs --tail 100 trend-radar

# デバッグ用にコンテナに入る
docker exec -it trend-radar /bin/bash

# 設定ファイルを確認
docker exec -it trend-radar ls -la /app/config/
```


## 🤖 AI分析デプロイ

TrendRadar v3.0.0は**MCP（Model Context Protocol）**ベースのAI分析機能を追加し、自然言語会話でニュースデータの深い分析を可能にします。**AI機能**を使用するための最良の前提条件は、このプロジェクトを少なくとも1日実行すること（ニュースデータを蓄積）です。

### 1. クイックデプロイ

Cherry StudioはGUI設定インターフェースを提供し、5分でクイックデプロイ、複雑な部分はワンクリックインストール。

**イラスト付きデプロイチュートリアル**: 現在、WeChat公式アカウントに更新されています（[FAQ & サポート](#-faq--サポート)を参照）、「mcp」と返信して取得

**詳細デプロイチュートリアル**: [README-Cherry-Studio.md](README-Cherry-Studio.md)

### 2. AIとの会話を学ぶ

**詳細会話チュートリアル**: [README-MCP-FAQ.md](README-MCP-FAQ.md)

**質問効果**:

> 実際には一度に複数の質問をすることは推奨されません。選択したAIモデルが以下のように順次呼び出すことさえできない場合は、モデルを切り替えることをお勧めします。

<img src="/_image/ai3.png" alt="MCP usage effect" width="600">


## 🔌 MCPクライアント

TrendRadar MCPサービスは標準Model Context Protocol（MCP）をサポートし、MCPをサポートするさまざまなAIクライアントに接続してスマート分析できます。

### サポートされるクライアント

**注意**:
- `/path/to/TrendRadar`を実際のプロジェクトパスに置き換えてください
- Windowsパスは二重バックスラッシュを使用: `C:\\Users\\YourName\\TrendRadar`
- 保存後は再起動を忘れずに

<details>
<summary><b>👉 クリックして展開: Claude Desktop</b></summary>

#### 設定ファイル方法

Claude DesktopのMCP設定ファイルを編集:

**Windows**:
`%APPDATA%\Claude\claude_desktop_config.json`

**Mac**:
`~/Library/Application Support/Claude/claude_desktop_config.json`

**設定内容**:
```json
{
  "mcpServers": {
    "trendradar": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/TrendRadar",
        "run",
        "python",
        "-m",
        "mcp_server.server"
      ],
      "env": {},
      "disabled": false,
      "alwaysAllow": []
    }
  }
}
```

</details>

<details>
<summary><b>👉 クリックして展開: Cursor</b></summary>

#### 方法1: HTTPモード

1. **HTTPサービスを開始**:
   ```bash
   # Windows
   start-http.bat

   # Mac/Linux
   ./start-http.sh
   ```

2. **Cursorを設定**:

   **プロジェクトレベル設定**（推奨）:
   プロジェクトルートに`.cursor/mcp.json`を作成:
   ```json
   {
     "mcpServers": {
       "trendradar": {
         "url": "http://localhost:3333/mcp",
         "description": "TrendRadar News Trending Aggregation Analysis"
       }
     }
   }
   ```

   **グローバル設定**:
   ユーザーディレクトリに`~/.cursor/mcp.json`を作成（同じ内容）

3. **使用手順**:
   - 設定を保存後、Cursorを再起動
   - チャットインターフェースの「Available Tools」で接続されたツールを確認
   - 使用開始: `Search today's "AI" related news`

#### 方法2: STDIOモード（推奨）

`.cursor/mcp.json`を作成:
```json
{
  "mcpServers": {
    "trendradar": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/TrendRadar",
        "run",
        "python",
        "-m",
        "mcp_server.server"
      ]
    }
  }
}
```

</details>

（VSCode/Cline/Continue、Claude Code CLI、MCP Inspectorなどを含む追加のクライアント設定は中国語版で利用可能）


## ☕ FAQ & サポート

> このプロジェクトをサポートしたい場合は、WeChatで**Tencent Charity**を検索し、お好きな金額を**Education Support Programs**に寄付できます〜
>
> 私たちは情報過多に不安を感じていますが、彼らは学習機会すらない情報砂漠で苦しんでいるので、私よりも彼らのサポートが必要です。

<details>
<summary><b>👉 クリックして展開: 著者のノート</b></summary>
<br>

すべてのサポートに感謝します！スポンサーサポートのおかげで、**1元寄付**のQRコードは削除されました。

以前の**1元サポーター**は上部の**謝辞**セクションにリストされています。

このプロジェクトの開発とメンテナンスには多大な時間、労力、コスト（AIモデル料金を含む）が必要です。スポンサーシップサポートにより、より自信を持ってメンテナンスできます。

現在、主要なAIモデルの価格は比較的手頃です。まだ適切なモデルがない場合、以下の**302.AI**をクリックすることも開発者をサポートします:

<div align="center">

<span style="margin-left: 10px"><a href="https://share.302.ai/mEOUzG" target="_blank"><img src="_image/icon-302ai.png" alt="302ai logo" width="100"/></a></span>

</div>

**使用プロセス:**

1. 登録とチャージ後、右上の[Management Dashboard](https://302.ai/dashboard/overview)に入る
2. 左側の[API Keys](https://302.ai/apis/list)をクリック
3. ページ下部でデフォルトのAPI KEYを見つけ、目アイコンをクリックして表示、その後コピー（注意: 右端のコピーボタンをクリックしないでください）
4. Cherry StudioはConsolidated 302.AIを統合しており、APIキーを入力するだけで使用できます（現在、完全なモデルリストを表示するには最初にキーを入力する必要があります）

すでに適切なモデルがある場合は、**登録して試してみる**ことを歓迎します〜

</details>

- **GitHub Issues**: 的を絞った回答に適しています。質問する際は完全な情報を提供してください（スクリーンショット、エラーログ、システム環境など）
- **WeChat公式アカウント**: 迅速な相談に適しています。関連記事の公開コメントエリアでの優先コミュニケーションをお勧めします。プライベートメッセージの場合は、丁寧な言葉遣いをお願いします 😉


<div align="center">

| WeChat公式アカウント |
|:---:|
| <img src="_image/weixin.png" width="400" title="Silicon-based Tea Room"/> |

</div>

## 🪄 スポンサー

> 302.AIは従量課金制のエンタープライズレベルAIリソースプラットフォームです
> 市場で最新かつ最も包括的な**AIモデル**と**API**を提供し、さらにすぐに使える各種オンラインAIアプリケーションを提供しています。


<div align="center">

<span style="margin-left: 10px"><a href="https://share.302.ai/mEOUzG" target="_blank"><img src="_image/banner-302ai-en.jpg" alt="302ai banner" width="800"/></a>

</div>


### よくある質問

<details>
<summary><b>👉 クリックして展開: Q1: HTTPサービスが開始できない？</b></summary>
<br>

**確認手順**:
1. ポート3333が占有されていないことを確認:
   ```bash
   # Windows
   netstat -ano | findstr :3333

   # Mac/Linux
   lsof -i :3333
   ```

2. プロジェクトの依存関係がインストールされているか確認:
   ```bash
   # インストールスクリプトを再実行
   # Windows: setup-windows.bat または setup-windows-en.bat
   # Mac/Linux: ./setup-mac.sh
   ```

3. 詳細なエラーログを表示:
   ```bash
   uv run python -m mcp_server.server --transport http --port 3333
   ```
4. カスタムポートを試す:
   ```bash
   uv run python -m mcp_server.server --transport http --port 33333
   ```

</details>

<details>
<summary><b>👉 クリックして展開: Q2: クライアントがMCPサービスに接続できない？</b></summary>
<br>

**ソリューション**:

1. **STDIOモード**:
   - UVパスが正しいことを確認（`which uv`または`where uv`を実行）
   - プロジェクトパスが正しく、中国語文字がないことを確認
   - クライアントエラーログを確認

2. **HTTPモード**:
   - サービスが開始されていることを確認（`http://localhost:3333/mcp`にアクセス）
   - ファイアウォール設定を確認
   - localhostの代わりに127.0.0.1を使用してみる

3. **一般的な確認**:
   - クライアントアプリケーションを再起動
   - MCPサービスログを確認
   - MCP Inspectorを使用して接続をテスト

</details>

<details>
<summary><b>👉 クリックして展開: Q3: ツール呼び出しが失敗またはエラーを返す？</b></summary>
<br>

**考えられる理由**:

1. **データが存在しない**:
   - クローラーが実行されたことを確認（outputディレクトリにデータがある）
   - クエリ日付範囲にデータがあることを確認
   - outputディレクトリで利用可能な日付を確認

2. **パラメータエラー**:
   - 日付形式を確認: `YYYY-MM-DD`
   - 正しいプラットフォームIDを確認: `zhihu`、`weibo`など
   - ツールドキュメントのパラメータ説明を参照

3. **設定問題**:
   - `config/config.yaml`が存在することを確認
   - `config/frequency_words.txt`が存在することを確認
   - 設定ファイル形式が正しいことを確認

</details>

### プロジェクト記事

> **関連記事**（中国語）:

- [Comment here for mobile Q&A by project author](https://mp.weixin.qq.com/s/KYEPfTPVzZNWFclZh4am_g)
- [Breaking 1000 stars in 2 months - My GitHub project promotion experience](https://mp.weixin.qq.com/s/jzn0vLiQFX408opcfpPPxQ)
- [Important notes for running this project via GitHub fork](https://mp.weixin.qq.com/s/C8evK-U7onG1sTTdwdW2zg)
- [How to write WeChat Official Account or news articles based on this project](https://mp.weixin.qq.com/s/8ghyfDAtQZjLrnWTQabYOQ)

> **AI開発**:
- ニッチな要件がある場合、プログラミング経験がゼロでも、私のプロジェクトに基づいて自分で開発できます
- 私のすべてのオープンソースプロジェクトは、独自の**AI支援ソフトウェア**を使用して開発効率を向上させています。このツールは現在オープンソースです
- **コア機能**: プロジェクトコードを迅速にフィルタリングしてAIに供給し、個人要件を追加するだけ
- **プロジェクトアドレス**: https://github.com/sansan0/ai-code-context-helper

## ⭐ 関連プロジェクト

> 📍 毛主席足跡地図 - 1893-1976年の完全な軌跡のインタラクティブ動的表示。同志の皆様のデータ貢献を歓迎します

- https://github.com/sansan0/mao-map

> Bilibiliコメントデータ可視化分析ソフトウェア

- https://github.com/sansan0/bilibili-comment-analyzer


<details>
<summary><strong>👉 クリックして展開: WeChatプッシュ通知ソリューション</strong></summary>
<br>

> このソリューションはWeWorkのプラグインメカニズムに基づいており、プッシュスタイルが非常に異なるため、現在のプロジェクトに関連する実装を含める予定は一時的にありません

- このユーザーのプロジェクトをフォーク: https://github.com/jayzqj/TrendRadar
- 上記のWeWorkプッシュ設定を完了
- 以下の画像に従って操作
- 設定後、スマホからWeWorkアプリを削除できます

<img src="_image/wework.png" title="github"/>

</details>

### プロジェクトワークフロー図

```mermaid
flowchart TD
    A[👤 ユーザー開始] --> B{🚀 デプロイを選択}

    B -->|クラウドデプロイ| C1[🍴 GitHubにフォーク]
    B -->|ローカルデプロイ| C2[🐳 Dockerデプロイ]

    C1 --> D[⚙️ 通知を設定<br/>複数チャネルサポート]
    C2 --> D

    D --> E[方法を選択:<br/>📱WeWork 💬Feishu 🔔DingTalk<br/>📟Telegram 📧Email]

    E --> F[🔑 通知パラメータを入力<br/>GitHub SecretsまたはEnv Vars]

    F --> G[📝 キーワードを設定<br/>config/frequency_words.txt<br/>通常/必須+/フィルター!]

    G --> H[🎯 モードを選択<br/>config/config.yaml]

    H --> H1[📋 daily - 日次サマリー<br/>スケジュールプッシュすべてのマッチ]
    H --> H2[📰 current - 現在のランキング<br/>スケジュールプッシュ最新]
    H --> H3[📈 incremental - 増分<br/>新しいコンテンツのみプッシュ]

    H1 --> I[オプション: プッシュ時間ウィンドウ<br/>⏰ プッシュ時間範囲を制限]
    H2 --> I
    H3 --> I

    I --> J[✅ 設定完了]

    J --> K[🤖 自動実行]

    K --> L[🕷️ 11+プラットフォームをクロール]
    L --> M[🔍 キーワードフィルタリング]
    M --> N[⚖️ 重みソート<br/>ランク 60% + 頻度 30% + ホット 10%]
    N --> O[📊 レポート生成<br/>HTML + プッシュメッセージ]
    O --> P[📱 マルチチャネルプッシュ]

    P --> Q[🎉 正確なプッシュを受信<br/>情報過多に別れを告げる]

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style D fill:#fff3e0
    style F fill:#fff9c4
    style G fill:#e8f5e9
    style H fill:#e0f2f1
    style I fill:#fce4ec
    style O fill:#e1bee7
    style Q fill:#c8e6c9
```

[![Star History Chart](https://api.star-history.com/svg?repos=sansan0/TrendRadar&type=Date)](https://www.star-history.com/#sansan0/TrendRadar&Date)


## 📄 ライセンス

GPL-3.0 License

---

<div align="center">

[🔝 トップに戻る](#trendradar)

</div>
