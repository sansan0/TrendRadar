# ═══════════════════════════════════════════════════════════════
#                    Extension Configuration
#                    扩展功能配置
# ═══════════════════════════════════════════════════════════════

# 报告去重插件配置 / Report Deduplication Plugin Config
# 该插件合并来自不同平台的相似新闻标题，减少重复内容

# ═══════════════════════════════════════════════════════════════
# 1. 启用设置 / Enable Settings
# ═══════════════════════════════════════════════════════════════
enabled: true                      # 是否启用扩展功能（报告数据去重和合并）
                                   # Enable extension features (report data deduplication and merging)

# 去重策略 / Deduplication strategy
# 可选值 / Options: ollama (AI 判断, 推荐), auto (自动选择), heuristic (纯算法)
strategy: "ollama"


# ═══════════════════════════════════════════════════════════════
# 2. 相似度配置 / Similarity Configuration
# ═══════════════════════════════════════════════════════════════
similarity:
  # 相似度阈值 / Similarity threshold (0.0 - 1.0)
  # 值越高，要求越相似才合并 / Higher value = stricter matching
  threshold: 0.85

  # 最大 AI 检查次数 / Maximum AI check count
  # AI 判断用于相似度接近阈值的场景 / AI used for borderline cases
  max_ai_checks: 50


# ═══════════════════════════════════════════════════════════════
# 3. Ollama 配置 / Ollama Configuration
# ═══════════════════════════════════════════════════════════════
ollama:
  # Ollama 服务器地址 / Ollama server URL
  base_url: "http://localhost:11434"

  # 使用的模型 / Model name
  model: "qwen2.5:14b-instruct"


# ═══════════════════════════════════════════════════════════════
# 4. 合并配置 / Merge Configuration
# ═══════════════════════════════════════════════════════════════
merge:
  # 来源分隔符 / Source name separator
  # 合并多个来源时使用的分隔符
  source_separator: " / "

  # 计数策略 / Count strategy
  # 可选值 / Options: sum (累加), max (取最大值)
  count_strategy: "sum"

  # 每组最大条目数 / Maximum items per group
  # 0 表示不限制 / 0 = no limit
  max_items_per_group: 10

# 自定义提示词文件路径 / Custom prompt file path
# 提示词文件相对路径，支持变量替换，包含 [system] 和 [user] 两个部分
# Prompt file path relative to project root, supports variable substitution with [system] and [user] sections
prompt_file: "config/dedupe_prompt.txt"
